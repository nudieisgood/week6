import{_ as h,g,r as c,h as w,o as u,c as p,i as b,b as e,d as x,e as y,s as V,f as m,v as _,F as k,p as S,l as I}from"./index-KgTiI9a3.js";import{a as B}from"./axios-G2rPRu76.js";const n=t=>(S("data-v-a9d9d313"),t=t(),I(),t),D={class:"container"},L={class:"row justify-content-center"},M=n(()=>e("h1",{class:"h3 mb-3 font-weight-normal"},"請先登入",-1)),N={key:0,class:"text-danger"},P={class:"col-8"},$={class:"form-floating mb-3"},q=n(()=>e("label",{for:"username"},"Email address",-1)),C={class:"form-floating"},E=n(()=>e("label",{for:"password"},"Password",-1)),F=n(()=>e("button",{class:"btn btn-lg btn-primary w-100 mt-3",type:"submit"}," 登入 ",-1)),U={__name:"LoginView",setup(t){const v=g(),o=c({username:"",password:""}),r=c(""),i=c(!1),f=async()=>{i.value=!0,B.post("https://vue3-course-api.hexschool.io/v2/admin/signin",o.value).then(a=>{const s=a.data.token,l=a.data.expired;document.cookie=`token=${s}`,document.cookie=`expDate=${l}`,v.push("/admin/products")}).catch(a=>{r.value=a.data.message}).finally(()=>{i.value=!1})};return(a,s)=>{const l=w("loadingVue");return u(),p(k,null,[b(l,{active:i.value},null,8,["active"]),e("div",D,[e("div",L,[M,r.value?(u(),p("h3",N,x(r.value),1)):y("",!0),e("div",P,[e("form",{id:"form",class:"form-signin",onSubmit:V(f,["prevent"])},[e("div",$,[m(e("input",{type:"email",class:"form-control",id:"username",placeholder:"name@example.com",required:"",autofocus:"","onUpdate:modelValue":s[0]||(s[0]=d=>o.value.username=d)},null,512),[[_,o.value.username]]),q]),e("div",C,[m(e("input",{type:"password",class:"form-control",id:"password",placeholder:"Password",required:"","onUpdate:modelValue":s[1]||(s[1]=d=>o.value.password=d)},null,512),[[_,o.value.password]]),E]),F],32)])])])],64)}}},T=h(U,[["__scopeId","data-v-a9d9d313"]]);export{T as default};
